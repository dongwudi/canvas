<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body onload="draw()">
<canvas width="300" height="300" id="canvas"></canvas>
<script>
    function draw() {
        var canvas = document.getElementById('canvas');
        var ctx;
        if (canvas.getContext) {
            ctx = canvas.getContext('2d');
            //  Canvas 的状态就是当前画面应用的所有样式和变形的一个快照。
            // save()  restore()
            // save 和 restore 方法是用来保存和恢复 canvas 状态的，都没有参数;
            // 绘画状态包括:
            //     当前应用的变形（即移动，旋转和缩放）
            //     strokeStyle, fillStyle, globalAlpha, lineWidth, lineCap, lineJoin, miterLimit, shadowOffsetX, shadowOffsetY, shadowBlur, shadowColor, globalCompositeOperation 的值
            //     当前的裁切路径（clipping path）

            ctx.fillRect(0, 0, 150, 150);   // 使用默认设置绘制一个矩形
            ctx.save();                  // 保存默认状态

            ctx.fillStyle = '#09F';      // 在原有配置基础上对颜色做改变
            ctx.fillRect(15, 15, 120, 120); // 使用新的设置绘制一个矩形

            ctx.save();                  // 保存当前状态
            ctx.fillStyle = '#FFF';      // 再次改变颜色配置
            ctx.globalAlpha = 0.5;
            ctx.fillRect(30, 30, 90, 90);   // 使用新的配置绘制一个矩形

            ctx.restore();               // 重新加载之前的颜色状态
            ctx.fillRect(45, 45, 60, 60);   // 使用上一次的配置绘制一个矩形

            ctx.restore();               // 加载默认颜色配置
            ctx.fillRect(60, 60, 30, 30);   // 使用加载的配置绘制一个矩形

        }
    }
</script>
</body>
</html>